{
  "initial_state": "GREETING",
  "states": {
    "GREETING": {
      "message": "Ol√°! Sou seu assistente de agendamento. Voc√™ gostaria de marcar uma 'consulta' ou um 'exame'?",
      "extract": "agendamento_info.tipo",
      "transitions": {
        "consulta": "GET_SPECIALTY",
        "exame": "GET_EXAM_TYPE"
      }
    },
    "GET_SPECIALTY": {
      "message": "Qual a especialidade m√©dica que voc√™ procura?",
      "extract": "agendamento_info.especialidade",
      "next_state": "GET_PATIENT_NAME"
    },
    "GET_EXAM_TYPE": {
      "message": "Qual o nome do exame que voc√™ gostaria de agendar?",
      "extract": "agendamento_info.nome_exame",
      "next_state": "GET_PATIENT_NAME"
    },
    "GET_PATIENT_NAME": {
      "message": "Qual o nome completo do paciente?",
      "extract": "paciente.nome",
      "next_state": "GET_PATIENT_CPF"
    },
    "GET_PATIENT_CPF": {
      "message": "Qual o CPF do paciente? (apenas n√∫meros)",
      "extract": "paciente.cpf",
      "next_state": "GET_PATIENT_BIRTHDATE"
    },
    "GET_PATIENT_BIRTHDATE": {
      "message": "Qual a data de nascimento do paciente? (ex: 15/03/1990)",
      "extract": "paciente.data_nascimento",
      "next_state": "GET_PATIENT_GENDER"
    },
    "GET_PATIENT_GENDER": {
      "message": "Qual o sexo do paciente? (Masculino, Feminino ou Outro)",
      "extract": "paciente.sexo",
      "next_state": "GET_PATIENT_PHONE"
    },
    "GET_PATIENT_PHONE": {
      "message": "Qual o telefone de contato do paciente? (com DDD)",
      "extract": "contato.telefone",
      "next_state": "GET_PATIENT_EMAIL"
    },
    "GET_PATIENT_EMAIL": {
      "message": "Qual o email do paciente? (opcional - pode responder 'n√£o tenho')",
      "extract": "contato.email",
      "next_state": "GET_PREFERRED_DATE"
    },
    "GET_PREFERRED_DATE": {
      "message": "Qual a data de sua prefer√™ncia para o agendamento? (ex: 20/12/2024)",
      "extract": "preferencias.data_preferencia",
      "next_state": "GET_PREFERRED_TIME"
    },
    "GET_PREFERRED_TIME": {
      "message": "Qual o hor√°rio de sua prefer√™ncia? (ex: 14:30 ou 'manh√£', 'tarde', 'noite')",
      "extract": "preferencias.horario_preferencia",
      "next_state": "GET_HEALTH_INSURANCE"
    },
    "GET_HEALTH_INSURANCE": {
      "message": "O paciente possui conv√™nio m√©dico? Se sim, qual o nome? (ou responda 'particular')",
      "extract": "agendamento_info.convenio",
      "next_state": "CONFIRMATION"
    },
    "CONFIRMATION": {
      "message": "Perfeito! Vou revisar todos os dados coletados:\n\nüìã **Dados do Paciente:**\n‚Ä¢ Nome: {paciente.nome}\n‚Ä¢ CPF: {paciente.cpf}\n‚Ä¢ Data de Nascimento: {paciente.data_nascimento}\n‚Ä¢ Sexo: {paciente.sexo}\n\nüìû **Contato:**\n‚Ä¢ Telefone: {contato.telefone}\n‚Ä¢ Email: {contato.email}\n\nüè• **Agendamento:**\n‚Ä¢ Tipo: {agendamento_info.tipo}\n‚Ä¢ {especialidade_ou_exame}: {agendamento_info.especialidade}{agendamento_info.nome_exame}\n‚Ä¢ Data Preferida: {preferencias.data_preferencia}\n‚Ä¢ Hor√°rio Preferido: {preferencias.horario_preferencia}\n‚Ä¢ Conv√™nio: {agendamento_info.convenio}\n\nTodos os dados est√£o corretos? Posso prosseguir com o agendamento?",
      "transitions": {
        "sim": "END",
        "correto": "END",
        "ok": "END",
        "pode": "END",
        "n√£o": "RESTART",
        "incorreto": "RESTART",
        "errado": "RESTART"
      }
    },
    "END": {
      "message": "üéâ Agendamento processado com sucesso! \n\nEm breve voc√™ receber√° uma confirma√ß√£o no telefone {contato.telefone}{email_confirmation}. \n\nObrigado por usar nosso sistema de agendamento!"
    },
    "RESTART": {
      "message": "Tudo bem, vamos recome√ßar o processo. Voc√™ quer marcar uma 'consulta' ou um 'exame'?",
      "next_state": "GREETING"
    }
  }
}